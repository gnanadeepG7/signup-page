

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>todo-list</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />

    <style>
        /* table ------------ */
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
        }
        #btn {
            padding: 10px 20px;
            margin-bottom: 10px;
            font-size: 16px;
            cursor: pointer;
            border: none;   
            background-color: #dda73a;
            color: white;
            border-radius: 5px;
            transition:0.3s;
            margin-left: 450px;
            box-shadow: 2px 2px 10px  rgba(0, 0, 0, 0.2);
        }
        #btn:hover {
            background-color: #aa6955;
            box-shadow: 1PX 2PX 5PX rgb(36, 33, 33);
            color: bisque;
        }
        /* popup form------------ */
        #popup-container {   
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            display: none;
        }
        #popup-body {
            background-color: #dfe3ba;
            padding: 20px;
            box-shadow: 1PX 2PX 5PX rgb(36, 33, 33);
           border-radius: 10px;
            width: 300px;  
        }
        input,textarea {
            padding: 10px;
            width: 300px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 20px;
            cursor: pointer;
            outline: 0px;
            box-shadow: 1PX 2PX 5PX rgb(147, 169, 10);
        }
        #sunmit-btn {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;   
            background-color: #b1ada4;
            color: white;
            border-radius: 5px;
            box-shadow: 2px 2px 20px rgba(29, 1, 1, 0.2);  
        }
        #sunmit-btn:hover {
            background-color: #23d3a7;
            box-shadow: 0px 1px 5px rgb(15, 3, 28);
        }
        label {
            font-weight: bold;
            padding: 3px;   
        }
        #icon {
            float: right;
            cursor: pointer;
        }   
        #icon:hover {
            color: rgb(172, 53, 53);
        }
    </style>
</head>
<body>
    <!-- table -->
    <button id="btn">Add person</button>
    <table id="table">
        <tr>
            <th>Name</th>
            <th>Age</th>
            <th>DOB</th>
            <th>Email</th>
            <th>Comments</th>
            <th>Actions</th>
        </tr>
    </table>
<!-- popup form -->
    <div id="popup-container">
        <div id="popup-body">
            <form>
                <i class="fa-solid fa-square-xmark" id="icon"></i><br>
                <label for="Fname">*FName:</label> <input type="text" id="fname" placeholder="Name" required><br>
                <label for="lname">*LName:</label><input type="text" id="lname" placeholder="Name" required><br>   
                <label for="age">*Age:</label><input type="number" id="age" placeholder="Age" required><br>
                <label for="dob">*DOB:</label><input type="date" id="dob" placeholder="DOB" required><br>
                <label for="email">*Email:</label><input type="email" id="email" placeholder="Email" required><br>
                <label for="comments">Comments:</label>  <textarea id="comments" placeholder="Comments"></textarea><br>
                <input type="submit" id="sunmit-btn"> 
            </form>
        </div>
    </div>

    <script>
        let btn = document.getElementById('btn'); 
        let popupContainer = document.getElementById('popup-container');
        let submitBtn = document.getElementById('sunmit-btn');
        let table = document.getElementById('table');

        // Open popup-----------------
        btn.addEventListener('click', function () {
            popupContainer.style.display = 'flex';
        }); 
        // Close popup on outside click-0-------------------
        popupContainer.addEventListener('click', function(e) {
            if (e.target === popupContainer) {
                popupContainer.style.display = 'none';
            }
        });
        // Close icon click---------------------------
        document.getElementById('icon').addEventListener('click', function() {
            popupContainer.style.display = 'none';
        }); 
        // Load from localStorage---------------------
        window.addEventListener('load', function() {
            let users = JSON.parse(localStorage.getItem('users')) || [];
            users.forEach(user => {
                addRowToTable(user);
            });   
        });
        let fname1 = document.getElementById('fname');
        let lname1 = document.getElementById('lname');
        let age1 = document.getElementById('age');
        let dob1 = document.getElementById('dob');
        let email1 = document.getElementById('email');
        let comments1 = document.getElementById('comments');
        // Submit form
        submitBtn.addEventListener('click', function() {
            

            let fname = fname1.value.trim();
            let lname = lname1.value.trim();
            let age = age1.value;
            let dob = dob1.value;
            let email = email1.value.trim();
            let comments = comments1.value.trim();
            let user = { fname, lname, age, dob, email, comments };

            addRowToTable(user);
            let users = JSON.parse(localStorage.getItem('users')) || [];
            users.push(user);
            localStorage.setItem('users', JSON.stringify(users));

            popupContainer.style.display = 'none';
            document.querySelector('form').reset();
        });
        // Add row--------------
        function addRowToTable(user) {
            let newRow = table.insertRow();
            newRow.innerHTML = `
                <td>${user.fname} ${user.lname}</td>
                <td>${user.age}</td>
                <td>${user.dob}</td>
                <td>${user.email}</td>
                <td>${user.comments}</td>
                <td>
                    <div style="display: flex; gap: 5px;">
                        <p class="edit-btn"><i class="fa-solid fa-pen-to-square"></i></p>
                        <p class="delete-btn"><i class="fa-solid fa-trash-can"></i></p>
                    </div>
                </td>`;
            let editBtn = newRow.getElementsByClassName('edit-btn')[0];
            let deleteBtn = newRow.getElementsByClassName('delete-btn')[0];

            // Delete row -----------
            deleteBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to delete?')) {
                    table.deleteRow(newRow.rowIndex);
                    let users = JSON.parse(localStorage.getItem('users')) || [];
                    users.splice(newRow.rowIndex - 1, 1);   
                    localStorage.setItem('users', JSON.stringify(users));
                }      
            });
            // Edit row----------------------
            editBtn.addEventListener('click', function() {
                fname1.value = user.fname;
                lname1.value = user.lname;
                age1.value = user.age;
                dob1.value = user.dob;
                email1.value = user.email;
                comments1.value = user.comments;

                popupContainer.style.display = 'flex';
                table.deleteRow(newRow.rowIndex);

                let users = JSON.parse(localStorage.getItem('users')) || [];
                users.splice(newRow.rowIndex - 1, 1);
                localStorage.setItem('users', JSON.stringify(users));
            });
        }
    </script>
    
</body>
</html>
